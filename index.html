<!doctype html>
<style>
  body {background-color: #b2a2fa;}
  h1 {
  color: blue;
  font-family: verdana;
  font-size: 300%;
}
  h1 {
  border: 2px solid red;
}
</style>
<html>
<title> Mystic Minds Location </title>
<center><h1>MYSTIC MINDS ICE CREAM AND PRIME </h1>
  <P>Location coming soon....</p>
   <button>Click here to get a notification when we decide our new location!</button></center>
  <script> 
  const button = document.querySelector("button")

button.addEventListener("click", () => {
  Notification.requestPermission().then(perm => {
    if (perm === "granted") {
      const notification = new Notification("MYSTIC MINDS ICE CREAM AND PRIME", {
        body: ("Location coming soon..."),
        data: { hello: "world" },
         })
      notification.addEventListener("error", e => {
        alert("error")
      })
    }
  })
})
navigator.serviceWorker.register("sw.js");
Notification.requestPermission(function(result) {
  if (result === 'granted') {
    navigator.serviceWorker.ready.then(function(registration) {
      registration.showNotification("Mystic Minds Location...");
    });
  }
});
    
    let notification   
    document.addEventListener("visibilitychange", () => {
      if (document.visibilitystate === "visible") {
        notification = new Notification("Mystic Minds Location Coming Soon...", {
          body: "We will update location soon.",
          tag: "Mystic Minds Location",
        })
      } else {
        navigator.serviceWorker.register("sw.js");
Notification.requestPermission(function(result) {
  if (result === 'granted') {
    navigator.serviceWorker.ready.then(function(registration) {
      registration.showNotification("Mystic Minds Location");
    });
  }
});
      }         
    })
    
    this.onpush = function(event) {
  console.log(event.data);
}

navigator.serviceWorker.register('serviceworker.js').then(
    function(serviceWorkerRegistration) {
        serviceWorkerRegistration.pushManager.subscribe().then(
            function(pushSubscription) {
                console.log(pushSubscription.subscriptionId);
                console.log(pushSubscription.endpoint);
            }, function(error) {
                console.log(error);
            }
        );
    }
);
</script>
</html>
